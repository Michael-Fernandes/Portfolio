<doctype !html>
<html>
<head>
    
</head>

<style>

body {
    overflow:  hidden;
    min-height:800px;
}
.clothing{
	opacity: 0;
}

.cls-3 {
    fill: none;
    stroke-miterlimit: 10;
}

.d3-img {
    width: 500px;
    max-width: 40%;
    height: auto;
}

#svg-parent {
    max-width: 75%;
    grid-area: svg;
}

.quick-view-wrapper{
    position: absolute;
}

#quick-view {
    font-size: 10pt;
    font-family: sans-serif;
    max-height: 50%;
    padding: 0 10px 0 10px;
    position: fixed;
    left: 60%;
    top: 5%;
}

.clothing-image {
    max-width: 60%;
    width: 150px;
    height: auto;
}

 #wrapper-div {
    max-width: 75%;
    margin:0;
    color: #535353;
}

.buy-button{
    background-color: #0067b6;
}

#item-description {
    max-width: 250px;
}

#price {
    font-size: 24pt;
}

.buy-button {
    width: 100px;
    color: white;
    height: 40px;
    border: 0px;
}

#quick-view {
    margin: 0 auto 0 auto;
}

#quick-view * {
    padding: 5px;
}

.size-button {
    padding: 10px;
}

.size-button {
    margin-right: 5px;
}
.size-button.active{
    background-color: darkGrey;
}

#quick-view-title {
    font-size: 14pt;
    font-weight: bold;
}

button:focus {outline:0;}

</style>

<body>
<div id="wrapper-div">
<svg id="svg-parent" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 505 683">
    <g id="container">
    <g id="wardrobe">
        <g id="jacket" class="cls-1 clothing" clothing="jacket">
            <polygon class="cls-2" points="303.36 387.68 265.79 386 257.43 389.33 200.53 387.33 185.02 388.62 185.33 377.9 190.84 356.55 168.15 360.27 159.67 339.75 165.67 238.86 180.31 164.32 183.56 157.5 213.39 135.96 234.92 129.66 296.01 126.67 333.72 155.45 342.01 194.6 351.33 235.22 348.34 326.33 338.31 340.36 326.5 341.72 326.5 392.88 303.36 387.68" />
            <path d="M295.35,126.68l37.41,28.55,8.26,39,9.3,40.54-3,90.9-9.82,13.73-11.39,1.28-1.14.1v51l-22.28-5.06,0,0h0L265.39,385h-.2l-.19.08-8.15,3.26-56.8-2h-.12L185,387.58l.29-10.1,5.3-20.56.38-1.49-1.51.25L168,359.22l-8.28-20.05,6-100.7L180.29,164l3.17-6.66,29.65-21.42,21.39-6.25,60.85-3m.32-1-61.33,3L212.67,135l-30,21.67-3.33,7-14.67,74.67-6,101,8.67,21,22.33-3.67-5.33,20.67L184,388.67l16-1.33,57,2,8.35-3.33,37.13,1.67L326,393V341.67l11.83-1.33L348.21,326l3.06-91.33L342,194l-8.32-39.33-38-29Z" transform="translate(0.5 0.5)" />
        </g>
        <g id="pants" class="cls-1 clothing" clothing="pant">
            <polygon class="cls-2" points="280.87 602.5 278.94 596.22 272.05 589.99 274.39 578.26 266.34 573.23 269 486.75 252.48 444.42 237.67 485.06 233.32 562.04 238.02 566.41 239.97 583.31 234.56 588.38 237.52 594.63 225.36 601.67 198.11 602 191.1 590.85 196.67 582.98 189.52 391.6 322.75 395.61 322.04 584.22 306.95 594.72 303.69 596.07 303.36 602.5 280.87 602.5" />
            <path d="M189.54,391.62l132.21,4L321,583.46,306.2,593.77,303.29,595l-.58.24,0,.88-.29,5.89H280.74L279,596l-.08-.39-.2-.25-6.58-6,2.22-11.13.14-.69-.59-.37-7.51-4.7L269,486.37v-.2l-.07-.19-16-41-1-2.47-.91,2.49-14.33,39.33-.05.14v.15l-4.33,76.67,0,.47.34.32,4.4,4.08,1.9,16.47-5,4.66-.53.5.31.66,2.61,5.5-11.64,6.74-26.84.32-6.68-10.63,5.28-7.46.2-.28v-.34l-7.13-190.68m-1-1,7.17,191.75-5.67,8L197.33,602l27.67-.33,12.67-7.33-3-6.33,5.33-5-2-17.33-4.67-4.33,4.33-76.67L252,445.33l16,41L265.33,573l8,5L271,589.67l7,6.58,2,6.75h23.33l.34-6.84,3-1.38L322,584l.71-189.39L188.5,390.58Z" transform="translate(0.5 0.5)" />
        </g>
        <g class="cls-1 clothing" clothing="sandal">
            <polygon class="cls-4" points="204.5 603 226.5 603 231 617.25 234.5 619.13 236.5 629.06 215.5 640.03 205 647.02 187 649.01 174 645 175 634.5 186 625.25 204.5 603"/>
            <polygon class="cls-4" points="281.25 602.5 303 602 303 610.5 325.75 631.5 329.88 641 329.44 646.5 319.97 650 298.48 651 285.99 638.5 274 631 276.87 618.5 281.25 602.5"/>
        </g>
        <g class="cls-1 clothing" clothing="headband"> 
            <polygon id="headband" class="cls-4" points="214.17 54.5 274.17 46.5 280.83 67.17 259.5 61.83 241.5 60.5 220.17 67.83 218.83 78.5 214.17 54.5"/>
        </g>
    </g>
</g>
    <rect id="dresser" class="cls-3" x="0.5" y="0.5" width="504" height="682" />
</svg>
</div>
<div class='quick-view-wrapper'>
    <div id="quick-view">
        <div id="quick-view-title">
        </div>
        <div id="item-image">
        </div>
        <div id="price">
            
        </div>
        <div id="item-description">
        </div>
        <div id="sizes">
        </div>
        <div class="buy">
        </div>
    </div>
</div>
</body>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
var active = false;

var width = window.innerWidth;
var height = window.innerHeight;

var svg = d3.select("svg");
var svg = d3.select('svg').attr("width", width)
                          .attr("height", height);

appendImage();

d3.selectAll(".clothing").on("mouseover", function() {
    populateItem(d3.select(this).attr("clothing"));
});

var img = d3.select(".d3-img");
img.lower();

intialize();
populateItem("pant");

$(function(){ 
  var t = d3.transition().duration(1000);
	var clothing = d3.selectAll(".clothing")
	clothing.style("fill", "yellow").style("opacity", "0.3");
	clothing.transition(t).style("opacity", 0)
});

function intialize(){
    var sizes = ["S", "M", "L", "XL"];
    for(var i = 0; i < sizes.length; i++){

    }
}

function toFront(node){
  node.parentNode.parentNode.append(node.parentNode);
}

function appendImage() {
    var img = d3.select("#container").append("svg:image")
                    .attr("transform", "translate(-0.5, -0.5)")
                    .attr("xlink:href", "imgs_prototype/check.jpg")
                    .classed("d3-img", true);

    d3.select(img).raise()
}


window.addEventListener('null', function() {
    d3.select(".d3-img").remove();
    appendImage();
});
    

function populateItem(item){
    var garments = {
        "jacket": {
            "img": "imgs_prototype/coat.jpg",
            "item": "This jacket beautifully meshes Urban with Outdoors. A simutaneously modern but casual outfit.",
            "price": "99",
            "sizes": ["S", "M", "L", "XL"],
            "title": "Blue Kamazi Jacket"
        }, "pant": {
            "img": "imgs_prototype/pants.jpg",
            "item": "A pair of pants that go well with any jacket. Mixing formal and casual at the same time.",
            "price": "50",
            "sizes": ["S", "M",],
            "title": "Green Outdoor Trousers"

        }, "sandal": {
            "img": "imgs_prototype/sandal.jpg",
            "item": "A sandal that might help you to climb a mountain, or at least the last flight of stairs to your office.",
            "price": "40",
            "sizes": ["S", "M", "L", "XL"],
            "title": "Dad Sandals"
        }, "headband": {
            "img": "imgs_prototype/hat.jpg",
            "item": "This hat could cover your head in shame because you don't have the awesome headband that the model has.",
            "price": "30",
            "sizes": ["L"],
            "title": "Just a Cap"
        }
    };

    var img = document.createElement("img");
    d3.select(".buy-button").remove()

    $(img).attr("src", garments[item].img)
            .addClass("clothing-image");

    $("#item-image").html("").append(img);

    $("#item-description").html(garments[item].item)

    var buy = document.createElement("button");
    $(buy).addClass("buy-button")
        .attr('value', item)
        .text("buy " + item)
        .on("click", function(){
                    alert("You made the purchase! Thanks!");
                    window.location.reload();
        });

    $(".buy").append(buy)
    $("#price").html(garments[item].price + " $")
    $("#quick-view-title").html(garments[item].title);
    buttonArray(garments[item].sizes);
}

function buttonArray(sizes){
    $(".size-button").remove();
    for(var i = 0; i < sizes.length; i++){
        var size = $(document.createElement("button"));
        $(size).text(sizes[i])
            .addClass("size-" + sizes[i])
            .addClass("size-button")
            .on("click", sizeClick);

        $("#sizes").append(size);
    }
}

function sizeClick() {
    if($(this).hasClass("active")){
        $(this).removeClass('active')
        active = false;
    } else {
        if(!active){
            $(this).addClass('active')
            active = true;
        }
    }
}

</script>
</html>